// generated by py2many --dlang=1
import core.memory;
import std;
import std.algorithm;
import std.array;
import std.range : iota;

void test_python(int iterations) {
  int iteration = 0;
  double total = 0.0.to!double;
  int array_length = 1000;
  int[] array = iota(0, array_length, 1).map!(i => i).array();
  writeln(format("%s %s", "iterations", iterations));
  while (iteration < iterations) {
    int innerloop = 0;
    while (innerloop < 100) {
      total += array[((iteration + innerloop) % array_length)];
      innerloop += 1;
    }
    iteration += 1;
  }

  if (total == 15150) {
    writeln(format("%s", "OK"));
  }
  destroy!true(array);
  core.memory.GC.free(cast(void*) array);
}

void main(string[] argv) {
  test_python(3);
}
